import{d as n,c as s,a as o,o as a}from"./index.17f7cf38.js";const t={class:"markdown-body"},p=o(`<h2 id="what-does-works-%E2%80%A6-on-npm" tabindex="-1">What does works \u2026 on npm</h2><p>I am pretty much used to the <code>javascript ecosystem</code> where the default dependency handling tooling work out of the box and it is good enough. What does \`\`npm\` offer out of the box?</p><p>This is an example of a package.json file</p><div class="code-wrapper"><div class="heading-row no-heading show-lang"><span class="lang-display">json</span></div><div class="code-block language-json no-line-numbers" data-lang="json" data-modifiers=""><pre class="language-json" data-lang="json"><code class="code-line odd first-row line-1"><span class="token punctuation">{</span></code>
<code class="code-line even line-2">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rel-blog&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-3">  <span class="token property">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></code>
<code class="code-line even line-4">  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.0&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-5">  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line even line-6">  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></code>
<code class="code-line odd line-7">    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line even line-8">    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-tsc --noEmit &amp;&amp; vite build&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-9">    <span class="token property">&quot;preview&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite preview&quot;</span></code>
<code class="code-line even line-10">  <span class="token punctuation">}</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-11">  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></code>
<code class="code-line even line-12">    <span class="token property">&quot;markdown-it-anchor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.6.4&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-13">    <span class="token property">&quot;markdown-it-emoji&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.2&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line even line-14">    <span class="token property">&quot;markdown-it-prism&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.2.4&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-15">    <span class="token property">&quot;markdown-it-table-of-contents&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.6.0&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line even line-16">    <span class="token property">&quot;pinia&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.17&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-17">    <span class="token property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.37&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line even line-18">    <span class="token property">&quot;vue-router&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.1.3&quot;</span></code>
<code class="code-line odd line-19">  <span class="token punctuation">}</span><span class="token punctuation">,</span></code>
<code class="code-line even line-20">  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></code>
<code class="code-line odd line-21">    <span class="token property">&quot;@tailwindcss/typography&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.5.4&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line even line-22">    <span class="token property">&quot;@types/node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^18.6.2&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-23">    <span class="token property">&quot;@vitejs/plugin-vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.0.0&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line even line-24">    <span class="token property">&quot;autoprefixer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^10.4.8&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-25">    <span class="token property">&quot;md-powerpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.3&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line even line-26">    <span class="token property">&quot;postcss&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.4.14&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-27">    <span class="token property">&quot;tailwindcss&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.1.7&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line even line-28">    <span class="token property">&quot;typescript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.6.4&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-29">    <span class="token property">&quot;vite&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.0.0&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line even line-30">    <span class="token property">&quot;vite-plugin-md&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.20.2&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-31">    <span class="token property">&quot;vite-svg-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.4.0&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line even line-32">    <span class="token property">&quot;vue-tsc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.38.4&quot;</span></code>
<code class="code-line odd line-33">  <span class="token punctuation">}</span></code>
<code class="code-line even last-row line-34"><span class="token punctuation">}</span></code></pre></div></div><p>We can se a section called <code>dependencies</code> with a clean looking list with the <code>direct</code> dependencies. It is easily readable, easy to understand and to modify if needed. Still you don\u2019t need to touch it by hand, just use <code>npm install, npm update</code> commands and it will be up to date.</p><p>After that we have the <code>devDependencies</code> with dependencies related to tooling that should not be part of the final build. Makes sense. Also, they share the same format, at some point you can move one line between those two without any trouble.</p><p>We can see also a <code>script</code> section, with some ready to run commands that we can call with a given shorthand. This is pretty useful as it servers as some sort of quick documentation when you got to work with some new project. Just run <code>npm install</code> and then open to package.json and read the scripts sections to figure out how you are supposed to run it.</p><p>Along this file, also other one way longer is generated, with the precise dependency tree, it is called <code>package-lock.json</code>. This means that you will be able to install the exact package set that worked out for the maintainer of the project. Pretty convenient. Again, make sense.</p><p>By default packages are copied in a local folder of the project called node_modules. You can install any package globally which can be useful for tooling but I am not really a fan of global packages.</p><p>It is <a href="https://youtu.be/M3BM9TB-8yA?t=589" class="external-link" target="_blank" rel="noreferrer noopener">not perfect</a> but gets the job done.</p><h3 id="how-the-hell-can-i-get-there-with-python." tabindex="-1">How the hell can I get there with Python.</h3><p>So in python, as far as I know, there is no consolidated ready to run alternative. It\u2019s just messy. Here I will write some notes about my findings and personal preferences, so I will be updating this.</p><h4 id="requirements.txt" tabindex="-1">requirements.txt</h4><p>Is this any sort of standard? We have some <a href="https://pip.pypa.io/en/stable/user_guide/" class="external-link" target="_blank" rel="noreferrer noopener">docs</a> on <code>pip</code> website. This is a plan file that lists what packages you will be using, one line per package.</p><p>What I don\u2019t like:</p><ul><li>The filename is vague, some tooling will look for it to be call requirements.txt but some other tooling will just make you write it. Even the <code>txt</code> looks really vague. Why not some structure with either yaml or json?.</li><li>The format of each line is, again, vague. You can specify the version of your package, or not, nobody cares.</li><li>When you specify the versions, it can be really messy <code>pkg3&gt;=1.0,&lt;=2.0</code></li><li>Not automated by default, some tooling will manage it but you are the main responsible for it maintenance.</li><li>You can install this file contents with the command <code>pip install -r requirements.txt</code>. Why don\u2019t we just do <code>pip install</code> or <code>pip install -r</code>.</li><li>The solution to create a lockfile is supposed to be <code>pip freeze</code> but it will add all the packages in your environment, not only the ones of your project. If you are not using conda/virtualenv this is very messy.</li></ul><p>What I like:</p><ul><li>You can specify dependencies from URLs like npm does. An example from pip docs is <code>git+https://myvcs.com/some_dependency@sometag#egg=SomeDependency</code>.</li><li>Readable, easy to edit if you don\u2019t add versions.</li></ul><p>How do I:</p><ul><li>Install the dependencies: <code>pip install -r requirements</code></li><li>Create a lockfile: <code>pip freeze &gt; requirements.frozen.txt</code>. Nice to have if you are inside a conda/virtual env, total hell if you are not.</li><li>Read a lockfile <code>TODO</code></li><li>Create a <code>requirements.txt</code> file with versions. Install the package <code>pipreqs</code> from <a href="https://pypi.org/project/pipreqs/" class="external-link" target="_blank" rel="noreferrer noopener">pip</a> and run <code>pipreqs --savepath pipreqs.txt --mode compat</code>. I like to keep this separate in a new file, if you delete the <code>--savepath</code> param it will just default to <code>requirements.txt</code>. This one makes sense, someone came to fix the issue that other provoked. <strong>The good option.</strong></li></ul><h4 id="setup.py" tabindex="-1">setup.py</h4><p>TODO</p><h4 id="poetry" tabindex="-1">Poetry</h4><p>Doing a <a href="https://stackoverflow.com/questions/67813396/modulenotfounderror-no-module-named-poetry-console" class="external-link" target="_blank" rel="noreferrer noopener">clean install</a>, first uninstall it:</p><div class="code-wrapper"><div class="heading-row no-heading show-lang"><span class="lang-display">powershell</span></div><div class="code-block language-powershell no-line-numbers" data-lang="powershell" data-modifiers=""><pre class="language-powershell" data-lang="powershell"><code class="code-line odd first-row line-1"><span class="token variable">$ul</span> = <span class="token punctuation">(</span><span class="token string">&quot;https://install.python-poetry.org&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line even line-2">       <span class="token string">&quot;https://raw.githubusercontent.com/python-poetry/poetry/master/install-poetry.py&quot;</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-3">       <span class="token string">&quot;https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py&quot;</span><span class="token punctuation">)</span></code>
<code class="code-line even line-4"></code>
<code class="code-line odd last-row line-5"><span class="token variable">$ul</span> <span class="token punctuation">|</span><span class="token operator">%</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token function">Invoke-WebRequest</span> <span class="token operator">-</span>Uri <span class="token variable">$_</span> <span class="token operator">-</span>UseBasicParsing<span class="token punctuation">)</span><span class="token punctuation">.</span>Content <span class="token punctuation">|</span> py <span class="token operator">-</span> <span class="token operator">--</span>uninstall <span class="token punctuation">}</span></code></pre></div></div><p>Then reinstall it (<a href="https://github.com/python-poetry/poetry/issues/6377" class="external-link" target="_blank" rel="noreferrer noopener">see</a>):</p><div class="code-wrapper"><div class="heading-row no-heading show-lang"><span class="lang-display">powershell</span></div><div class="code-block language-powershell no-line-numbers" data-lang="powershell" data-modifiers=""><pre class="language-powershell" data-lang="powershell"><code class="code-line odd first-row line-1"><span class="token variable">$ul</span> <span class="token punctuation">|</span><span class="token operator">%</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token function">Invoke-WebRequest</span> <span class="token operator">-</span>Uri <span class="token variable">$_</span> <span class="token operator">-</span>UseBasicParsing<span class="token punctuation">)</span><span class="token punctuation">.</span>Content <span class="token punctuation">|</span> py <span class="token operator">-</span><span class="token punctuation">}</span></code></pre></div></div><p>Update poetry: <code>poetry self update</code></p><p><a href="https://stackoverflow.com/questions/62764148/how-to-import-requirements-txt-from-an-existing-project-using-poetry" class="external-link" target="_blank" rel="noreferrer noopener">Import packages from requirements.txt</a></p><h4 id="conda-virtual-env-setup" tabindex="-1">Conda virtual env setup</h4><p>TODO</p><h4 id="environment.yml" tabindex="-1">environment.yml</h4>`,32),l=[p],u={},k="",h=n({__name:"20220814_keeping_python_dependency_chaos_under_control",setup(c,{expose:e}){return e({frontmatter:{},excerpt:void 0}),(i,r)=>(a(),s("div",t,l))}});export{h as default,k as excerpt,u as frontmatter};
